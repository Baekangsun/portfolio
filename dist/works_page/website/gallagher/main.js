let canvas,ctx;canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),canvas.width=400,canvas.height=700,document.body.appendChild(canvas);let backgroundImage,spaceshipImage,bulletImage,enemyImage,gameOverImage,replay=document.querySelector(".replay"),gameOver=!1,score=0,spaceshipX=canvas.width/2-32,spaceshipY=canvas.height-64,bulletList=[],enemyList=[];function Bullet(){this.x=0,this.y=0,this.init=function(){this.x=spaceshipX,this.y=spaceshipY,this.alive=!0,bulletList.push(this)},this.update=function(){this.y-=7},this.checkHit=function(){for(let e=0;e<enemyList.length;e++)this.y<=enemyList[e].y&&this.x>=enemyList[e].x&&this.x<=enemyList[e].x+40&&(score++,this.alive=!1,enemyList.splice(e,1))}}function generateRandomValue(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Enemy(){this.x=0,this.y=0,this.init=function(){this.y=0,this.x=generateRandomValue(0,canvas.width-64),enemyList.push(this)},this.update=function(){this.y+=3,this.y>=canvas.height-64&&(gameOver=!0)}}function loadImage(){backgroundImage=new Image,backgroundImage.src="images/bg.jpg",spaceshipImage=new Image,spaceshipImage.src="images/ship.png",bulletImage=new Image,bulletImage.src="images/bullet.png",enemyImage=new Image,enemyImage.src="images/enemy.png",gameOverImage=new Image,gameOverImage.src="images/gameover.jpg"}let keysDown={};function setupkeyboardListener(){document.addEventListener("keydown",(function(e){keysDown[e.keyCode]=!0})),document.addEventListener("keyup",(function(){delete keysDown[event.keyCode],32==event.keyCode&&createBullet()}))}function createBullet(){(new Bullet).init()}function createElement(){setInterval((function(){(new Enemy).init()}),1e3)}function update(){39 in keysDown&&(spaceshipX+=5),37 in keysDown&&(spaceshipX-=5),spaceshipX<=0&&(spaceshipX=0),spaceshipX>=canvas.width-40&&(spaceshipX=canvas.width-40);for(let e=0;e<bulletList.length;e++)bulletList[e].alive&&(bulletList[e].update(),bulletList[e].checkHit());for(let e=0;e<enemyList.length;e++)enemyList[e].update()}function render(){ctx.drawImage(backgroundImage,0,0,canvas.width,canvas.height),ctx.drawImage(spaceshipImage,spaceshipX,spaceshipY),ctx.fillText(`Score:${score}`,20,50),ctx.fillStyle="white",ctx.font="20px Arial";for(let e=0;e<bulletList.length;e++)bulletList[e].alive&&ctx.drawImage(bulletImage,bulletList[e].x+13.5,bulletList[e].y);for(let e=0;e<enemyList.length;e++)ctx.drawImage(enemyImage,enemyList[e].x,enemyList[e].y)}function main(){gameOver?ctx.drawImage(gameOverImage,75,200,250,250):(update(),render(),requestAnimationFrame(main))}replay.addEventListener("click",(function(){location.reload()})),loadImage(),setupkeyboardListener(),createElement(),main();